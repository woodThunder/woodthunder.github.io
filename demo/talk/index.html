<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta name="full-screen" content="yes">
    <meta content="default" name="apple-mobile-web-app-status-bar-style">
    <meta name="screen-orientation" content="portrait">
    <meta name="browsermode" content="application">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="x5-orientation" content="portrait">
    <meta name="x5-fullscreen" content="true">
    <meta name="x5-page-mode" content="app">
    <base target="_blank">
    <title>会话_聊天机器人</title>
    <script src="jquery.js"></script>
    <link href="chat.css" rel="stylesheet">
</head>
<body lang="zh">
    <!--<img style="width:100%;height:100%" src="~/Images/chatBack.jpg">-->
    <div class="abs cover contaniner">
        <div class="abs cover pnl">
            <div class="abs top pnl-head" id="pnlHead" style="background-image: url(https://rs.v5kf.com/upload/105723/149733084010.jpg); background-color: rgb(36, 44, 51);">
					<img src="//rs.v5kf.com/upload/105723/14919596515.png" class="pnl-hl" id="siteLogo">
					<!--<div class="pnl-site hide" id="siteName" style="color: rgb(236, 236, 236);">深圳市智客网络科技有限公司</div>
					<div class="pnl-worker abs left">
						<div class="pnl-worker-photo" id="workerPhoto" style="background-image: url(https://www.v5kf.com/files/icons/201610/14761555537.png&quot;);">
							<i class="ic kh pnl-worker-icon kh-bg" id="workerIcon"></i>
						</div>
						<div class="pnl-worker-text">
							<span class="pnl-worker-name" id="workerName">小五</span>
							<br>
							<span class="pnl-worker-site" id="workerSite">----</span>
						</div>
					</div>
					<div class="pnl-about" id="pnlAbout">
						<i class="kh"></i>
						<span>关于我们</span>
						<div class="abs pop-about">
							<div id="about"><h4>深圳市智客网络科技有限公司</h4><p>让客户满意、让用户放心，这是我们工作的目标和最终归宿！</p><ul class="about-links"><li class="about-link"><i class="kh"></i><span>4006-555-406</span></li><li class="about-link"><i class="kh"></i><a href="//www.v5kf.com" target="_blank">www.v5kf.com</a></li></ul></div>
						</div>
					</div>
					<div class="pnl-opt pnl-esc" id="exit" style="color: rgb(236, 236, 236);"><i class="kh"></i></div>
					<div class="pnl-opt pnl-min" id="min" style="color: rgb(236, 236, 236);"><i class="kh"></i></div>
					<div class="pnl-opt pnl-max" id="max" style="color: rgb(236, 236, 236);"><i class="kh"></i></div>
					<div class="pnl-opt pnl-voice" id="voicebtn" style="color: rgb(236, 236, 236);"><i class="kh" id="voice"></i></div>-->
				</div>
            <div class="abs cover pnl-body" id="pnlBody">
                <div class="abs cover pnl-left">
                    <div class="abs cover pnl-msgs scroll" id="show">
                        <div class="msg min time" id="histStart">加载历史消息</div>
                        <div class="pnl-list" id="hists">
                            <!-- 历史消息 -->
                        </div>
                        <div class="pnl-list" id="msgs">
                            <div class="msg robot">
                                <div class="msg-left" worker="小龙">
                                    <div class="msg-host photo" style="background-image: url('https://www.v5kf.com/files/icons/201610/14761555537.png');"></div>
                                    <div class="msg-ball" title="今天 17:52:06">你好，我是只能打字的聊天机器人                <br><br>您是想要了解哪些方面呢？</div>
                                </div>
                            </div>
                            <div class="msg guest">
                                <div class="msg-right">
                                    <div class="msg-host headDefault" style="background-image: url('https://www.v5kf.com/files/icons/201610/14761555537.png');"></div>
                                    <div class="msg-ball" title="今天 17:52:06">你好</div>
                                </div>
                            </div>
                        </div>
                        <div class="pnl-list hide" id="unreadLine">
                            <div class="msg min time unread">未读消息</div>
                        </div>
                    </div>
                    <div class="abs bottom pnl-text">
                        <!--<div class="abs top pnl-warn" id="pnlWarn">
                            <div class="fl btns rel pnl-warn-free">
                                <img src="../Images/icon/Smile.png" class="kh warn-btn" title="表情" id="emojiBtn" />
                                <img src="../Images/icon/pic.png" class="kh warn-btn" title="截屏" id="emojiBtn" />
                                <img src="../Images/icon/camera.png" class="kh warn-btn" title="图片" id="emojiBtn" />
                                <img src="../Images/icon/edit.png" class="kh warn-btn" title="保存" id="emojiBtn" />
                            </div>
                        </div>-->
                        <input type="text" placeholder="请输入名字" id="name" />
                        <div class="abs cover pnl-input">
                            <textarea class="scroll" id="text" wrap="hard" placeholder="在此输入文字信息..."></textarea>
                            <div class="abs atcom-pnl scroll hide" id="atcomPnl">
                                <ul class="atcom" id="atcom"></ul>
                            </div>
                        </div>
                        <div class="abs br pnl-btn" id="submit" style="background-color: rgb(32, 196, 202); color: rgb(255, 255, 255);" onclick="SendMsg()">发送</div>
                    </div>
                </div>
                <div class="abs right pnl-right">
                    <div class="slider-container hide"></div>
                    <div class="pnl-right-content">
                        <div class="pnl-tabs">
                            <div class="tab-btn active" id="hot-tab">常见问题</div>
                            <div class="tab-btn" id="rel-tab">相关问题</div>
                        </div>
                        <div class="pnl-hot">
                            <ul class="rel-list unselect" id="hots">
                                <!-- <li class="rel-item">这是一个问题，这是一个问题？</li> -->
                            </ul>
                        </div>
                        <div class="pnl-rel" style="display: none;">
                            <ul class="rel-list unselect" id="rels">
                                <!-- <li class="rel-item">这是一个问题，这是一个问题？</li> -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
<script>
$.ajax({
	url: 'http://pv.sohu.com/cityjson?ie=utf-8',
	dataType: "script",
	success: function(){
	    console.log(returnCitySN);
    }
});	
	
var webSocket = null;
if(window.WebSocket){
    webSocket = new WebSocket("ws://10.10.50.7:9090/ws");
    webSocket.onopen = function (ev) {
        console.log("建立连接！")
    }
    webSocket.onclose = function (ev) {
        console.log("断开连接！")
    }
    webSocket.onmessage = function (ev) {
        console.log("接受到消息！ ："+ev.data)
        var server = document.getElementById("msgs");
        server.innerHTML += ev.data + "<br/>";
        
//      "<div class="msg guest' worker='小龙'><div class='msg-right'><div class='msg-host'></div><div class='msg-ball"></div></div></div>"
    }
}else {
    alert("当前浏览器不支持Web Socket！")
}	
	// 发送信息
function SendMsg()
{
	var name = document.getElementById("name");
    var text = document.getElementById("text");
    if (name.value == "" || name.value == null)
    {
        alert("名字为空，请输入！")
    }
    if (text.value == "" || text.value == null)
    {
        alert("发送信息为空，请输入！")
    }
    
    webSocket.send(name.value+"-"+text.value)
    text.value = ''
}
// 发送的信息处理
function SendMsgDispose(detail)
{
    detail = detail.replace("\n", "<br>").replace(" ", " ")
    return detail;
}
</script>