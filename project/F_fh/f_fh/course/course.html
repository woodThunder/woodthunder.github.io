<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1,user-scalable=no;" name="viewport">
    <title>星妈课堂-视频课程</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/swiper.min.css">
    <link rel="stylesheet" href="../css/animate.css">
    <script src="../javascript/jquery-1.9.1.min.js"></script>
    <script src="../javascript/swiper.min.js"></script>
    <script src="../javascript/hammer.js"></script>
    <script src="../javascript/wow.min.js"></script>
    <script src="../javascript/function.js"></script>
    
    <link rel="stylesheet" href="../css/jquery.mCustomScrollbar.css">
    <script src="../javascript/jquery.mCustomScrollbar.concat.min.js"></script>
    <!--单独引用-->
    <link href="../css/mobiscroll-2.13.2.full.min.css" rel="stylesheet" type="text/css" />
    <script src="../javascript/mobiscroll-2.13.2.full.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../css/x_style.css">
    <script src="../javascript/x_function.js"></script>
</head>
<body class="bg preview" style="height: auto;">
	<div class="bg1 course1">
		<div class="course1_img">
			<a href="video.html">
				<img src="../upload/course_img.jpg" />
				<i></i>
				<img src="../images/course_btn.png" class="course_btn" />
			</a>
		</div>
		<div class="course1_b">
			<div class="course1_l fl">
				<h1>妈妈情绪如何影响宝宝的安全感</h1>
				<p><span class="course1_time">2018-02-05  18:09:45</span><span class="course1_views">589</span></p>
			</div>
			<div class="course1_r fr">
				<input type="button" class="message_btn" value="订阅系列课" />
			</div>
			<div class="clear"></div>
		</div> 
		
		<a href="card.html" class="course1_edit"><i></i>我的邀请卡</a>
	</div>
	<!--<canvas width="" height="" style="display: none;"></canvas>-->
	<div class="bg1 preview_c">
		<div class="tit">课程介绍</div>
		<div class="name">陈杰</div>
		<p>北京儿童医院儿童保健中心主任，主任医师，知名专家毕业于首都医科大学医疗系知名专家毕业于首都医科大学医疗系，北京儿童医院儿童保健中心主任</p>
		<!--<img src="../upload/card_img02.jpg" class="preview_c_img" />-->
		<div class="preview_c_img">
			
			<div class="preview_box">
				<div class="card_list2">
	        		<img src="../upload/card_bg02.jpg">
	        		<div class="user">
	        			<div class="user_ph"><img src="../upload/x_photo.jpg"/></div>
	        			<div class="user_name">飞鹤</div>
	        			<p>发现了一门好课</p>
	        		</div>
	        		<div class="c_name">
	        			<img src="../upload/two_border_bg.png" class="two_border_bg" />
	        			<h1>飞鹤星妈课堂</h1>
	        			<img src="../upload/two_line.png" class="two_line" />
	        			<h2>婴幼儿睡眠的秘密</h2>
	        			<h3>开课时间：1月24日 周三晚 8:00</h3>
	        		</div>
	        		<div class="p_name">
	        			<div class="p_name_l fl"><img src="../upload/people_ph.jpg"/></div>
	        			<div class="p_name_r fl">
	            			<h1>主讲人：罗丽漫</h1>
	            			<h2>首都医科大学呼吸科主任医师 </h2>
	            			<h3>中国中医药促进会理事<br>中西医结合治疗儿科呼吸系统疾病</h3>
	            		</div>
	        		</div>
	        		<div class="ewm">
	        			<img src="../upload/card_ewm.jpg" />
	        			<p>长摁-识别二维码-关注</p>
	        		</div>
	        	</div>
	        </div>
		</div>
		<div class="take">
			<span></span>
			<i>收起</i>
		</div>
	</div>
	<div class="wrap">
		<div class="tit">更多课程</div>
		<div class="ctipslist_wrap">
        	<div class="ctipslist_list">
        		<div class="ctipslist_img">
                	<img src="../upload/course_img01.jpg">
                	<div class="ctipslist_box">
                		<i>育儿</i>
                		<div class="x_time">2018-03-21</div>
                		<div class="x_name">陈杰</div>
                		<h1 class="x_course">关于宝宝睡眠的那些事</h1>
                	</div>
                </div>
        		<ul>
        			<li>
        				<a href="video.html">
        					<img src="../images/course_icon01.png" />
        					<span>看视频</span>
        				</a>
        			</li>
        			<li>
        				<a href="audio.html">
        					<img src="../images/course_icon03.png" />
        					<span>听音频</span>
        				</a>
        			</li>
        			<li>
        				<a href="#">
        					<img src="../images/course_icon02.png" />
        					<span>读笔记</span>
        				</a>
        			</li>
        		</ul>
        	</div>
        	<div class="ctipslist_list">
        		<div class="ctipslist_img">
                	<img src="../upload/course_img02.jpg">
                	<div class="ctipslist_box">
                		<i>育儿</i>
                		<div class="x_time">2018-03-21</div>
                		<div class="x_name">陈杰</div>
                		<h1 class="x_course">关于宝宝睡眠的那些事</h1>
                	</div>
                </div>
        		<ul>
        			<li>
        				<a href="video.html">
        					<img src="../images/course_icon01.png" />
        					<span>看视频</span>
        				</a>
        			</li>
        			<li>
        				<a href="audio.html">
        					<img src="../images/course_icon03.png" />
        					<span>听音频</span>
        				</a>
        			</li>
        			<li>
        				<a href="#">
        					<img src="../images/course_icon02.png" />
        					<span>读笔记</span>
        				</a>
        			</li>
        		</ul>
        	</div>
        </div>
	</div>
<script type="text/javascript" src="../javascript/html2canvas.js"></script>
<script type="text/javascript" src="../javascript/canvas2image.js"></script>
	<script>
        $(document).ready( function(){
			
            

            

        });
		window.onload=function(){
			
				creatImage(".card_list2");
			
		}
		
		
        function creatImage(target){
        	
        	
        	var _w = $(target).width();
        	var _h = $(target).height();
            $(".preview_c_img > img").remove();
            
//          var canvas = document.querySelector("canvas");
			var canvas = document.createElement("canvas"); 
            console.log(canvas)
            var context= canvas.getContext("2d");
                    
            // 屏幕的设备像素比
			var devicePixelRatio = window.devicePixelRatio || 1;
			
			// 浏览器在渲染canvas之前存储画布信息的像素比
			var backingStoreRatio = context.webkitBackingStorePixelRatio ||
            context.mozBackingStorePixelRatio ||
            context.msBackingStorePixelRatio ||
            context.oBackingStorePixelRatio ||
            context.backingStorePixelRatio || 1;

			// canvas的实际渲染倍率
			var ratio = devicePixelRatio / backingStoreRatio;
            
            canvas.width = _w * ratio;
			canvas.height = _h * ratio;
			
			context.scale(ratio,ratio)
            
            html2canvas($(target).get(0), {
            	canvas:canvas,
                allowTaint: true,
                taintTest: true,
                onrendered: function(canvas) {
                    canvas.id = "mycanvas";
                    
                    
//                  canvas.style.width = _w;
//					canvas.style.height = _h;
                    
                    var dataUrl = canvas.toDataURL();
                    var img = Canvas2Image.convertToImage(canvas, canvas.width, canvas.height);
                    $(".preview_c_img").prepend(img);
                    $(img).attr("id","image")
//                  $(img).css({
//                  	"width":canvas.width/ratio+"px",
//                  	"height":canvas.height/ratio+"px"
//                  })
                    
                    /*
                    var newImg = document.createElement("img");
                    newImg.src =  dataUrl;
                    newImg.id = "image"
                    $(".preview_c_img").prepend(newImg);
                    $("#image").css({
                    	"width":canvas.width/ratio+"px",
                    	"height":canvas.height/ratio+"px"
                    })
//                  alert($(".preview_c_img").find("img").attr("id"));
*/
                }
            });
        }
	</script>	
</body>
</html>